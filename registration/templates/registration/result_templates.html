{% extends 'base.html' %}
{% load static %}

{% block dashboard %}


<div class="container">
  <p class="h1 fw-semibold mb-4">Add Batch Marks</p>
  {% for cls, batches in class_batches.items %}
  <div class="row shuffle">

    <h2 class="text-dark fw-semibold mb-1 mt-4">{{ cls }}</h2>
    {% for batch in batches %}
    <div class="col-sm-6 col-md-4 col-lg-3 category shuffle-item shuffle-item--visible mb-4">
      <div class="card">
        <ul class="list-group">
          <li class="list-group-item bg-dark text-white border-dark d-flex justify-content-between align-items-center">
            <p class="m-0">{{batch}}</p>
          </li>
          {% for test in batch.test_paper.all %}
          <li style="position: relative;" class="list-group-item d-flex flex-column">
            <a href="{% url 'add_result' batch.id test.id %}{% if selected_session %}?session={{ selected_session.id }}{% endif %}"
              style="z-index: 2;" class=" text-dark fw-semibold text-decoration-none">
              <p class="m-0">{{test.name}} </p>
            </a>
            <small class="text-muted" style="z-index: 3;">{{test.date}}</small>
            <div class="bg-success-subtle"
              style="width: {{test.calculate_completion|floatformat:1}}%; height: 99%; position: absolute; top: 0; left: 0;">
            </div>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
    {% endfor %}
  </div>

  {% endfor %}
</div>


<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"
  integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous"
  async></script>

{% endblock dashboard %}